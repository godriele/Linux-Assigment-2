#!/bin/bash

# Configuration Setup Scrip!

# ------------------------------------------------------------------------------------------------------------
# Step 1: Git 


   if [[ -e /bin/git ]]; then
		
	   # If you system has git installed it will clone the repository inside the config_files directory

	   git clone https://gitlab.com/cit2420/2420-as2-starting-files ~/config_files 
	   echo "Your system has Git installed, Cloned the repository into config_files"
   else     
	   # git is not installed 

           echo "Your system does not have Git installed"
	   exit 1
   fi
# ----------------------------------------------------------------------------------------------------------
# Step 2: Listing all the files and directories inside the cloned repository


   config_repo="$HOME/config_files"

   content_files=$(find "$config_repo" -maxdepth 1 -mindepth 1-type d)


# ------------------------------------------------------------------------------------------------------------

# step 3: Connecting symbolic links to our files 


  for content in $content_files; do

      #Here we are getting the abosolute path of the directory
      dir=$(basename "$content_files")

      case "$dir" in
          "bin")
	  	target="$HOME/bin"
		;;
	  "config")
	        target="$HOME/.config"
		;;
   	  "home")
	       target="$HOME/.bashrc"
	        
	       ln -s "$content/bashrc" "$target"
	       continue
	       ;;
      esac
     
      if [ ! -e "$target" ]; then 
         ln -s "$content" "$target"
	 echo "created symlink: $target -> $content"
      else 
         echo "Symlink already exists: $target"
      fi 
done
